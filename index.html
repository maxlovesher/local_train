<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Attendance Calculator</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    
    <div id="login-screen">
        <div class="login-container">
            <div class="login-header">
                <h1 id="auth-title">Sign In</h1>
                <p id="auth-subtitle">Access your dashboard</p>
            </div>
            
            <form class="login-form" id="loginForm">
                <div class="form-group">
                    <label for="login-username">Username or Email</label>
                    <input type="text" id="login-username" name="username" placeholder="Enter your username or email" required>
                    <div class="error-message" id="loginUsernameError">Please enter a valid username or email</div>
                </div>
                
                <div class="form-group">
                    <label for="login-password">Password</label>
                    <input type="password" id="login-password" name="password" placeholder="Enter your password" required>
                    <div class="error-message" id="loginPasswordError">Please enter your password</div>
                </div>
                
                <button type="submit" class="btn">Sign In</button>
                
                <div class="form-footer">
                    <p>Don't have an account? <a href="#" id="showRegister">Register here</a></p>
                    <p><a href="#">Forgot Password?</a></p>
                </div>
            </form>

            <form class="login-form hidden" id="registerForm">
                <div class="form-group">
                    <label for="register-username">Username or Email</label>
                    <input type="text" id="register-username" name="username" placeholder="Choose a username or email" required>
                    <div class="error-message" id="registerUsernameError">Username must be unique</div>
                </div>
                
                <div class="form-group">
                    <label for="register-password">Password</label>
                    <input type="password" id="register-password" name="password" placeholder="Create your password" required>
                    <div class="error-message" id="registerPasswordError">Password is required</div>
                </div>
                
                <button type="submit" class="btn">Register</button>
                
                <div class="form-footer">
                    <p>Already have an account? <a href="#" id="showLogin">Sign in here</a></p>
                </div>
            </form>

        </div>
    </div>

    <div id="app-screen" class="hidden">
        <div class="container">
            <header>
                <h1>Attendance Calculator</h1>
                <button id="logout-btn" class="logout-btn">Logout</button>
                <p>Calculate how many classes you can bunk while maintaining your desired attendance percentage</p>
            </header>

            <div class="card">
                <h2>Select Your Section</h2>
                <select id="section-selector">
                    <option value="">-- Select Section --</option>
                    <script>
                        for (let i = 1; i <= 54; i++) {
                            document.write('<option value="' + i + '">Section ' + i + '</option>');
                        }
                    </script>
                </select>
            </div>

            <div id="timetable-container" class="card" style="display: none;">
                <h2>Your Timetable</h2>
                <div id="timetable"></div>
            </div>

            <div id="attendance-form-container" class="card" style="display: none;">
                <h2>Attendance Information</h2>
                <div class="info-box">
                    <p><strong>Note:</strong> Enter the absolute number of classes attended and held so far for each subject.</p>
                </div>
                <form id="attendance-form">
                    <div>
                        <label for="start-date">Start Date of Semester:</label>
                        <input type="date" id="start-date" required>
                    </div>

                    <div>
                        <label for="end-date">End Date of Semester:</label>
                        <input type="date" id="end-date" required>
                    </div>

                    <div>
                        <label for="desired-attendance">Desired Attendance Percentage:</label>
                        <input type="number" id="desired-attendance" min="0" max="100" value="75" required>
                    </div>

                    <h3>Enter Your Current Attendance (Number of Classes)</h3>
                    <div id="subject-inputs">
                        </div>

                    <button type="submit">Calculate Attendance</button>
                </form>
            </div>
            
            <div id="holiday-register-container" class="card">
                <h2>Add a Holiday</h2>
                <form id="holiday-form">
                    <div>
                        <label for="holiday-date">Holiday Date:</label>
                        <input type="date" id="holiday-date" required>
                    </div>
                    <div>
                        <label for="holiday-event">Event Name:</label>
                        <input type="text" id="holiday-event" placeholder="e.g., University Holiday" required>
                    </div>
                    <button type="submit">Add Holiday</button>
                </form>
                <h3>Registered Holidays</h3>
                <ul id="holiday-list"></ul>
            </div>

            <div id="leave-register-container" class="card">
                <h2>Register an Absence</h2>
                <div class="info-box">
                    <p>Register a planned absence to see how it affects your projected attendance.</p>
                </div>
                <form id="leave-form">
                    <div>
                        <label for="leave-date">Absence Date:</label>
                        <input type="date" id="leave-date" required>
                    </div>
                    <button type="submit">Add Absence</button>
                </form>
                <h3>Registered Absences</h3>
                <ul id="leave-list"></ul>
            </div>

            <div class="loader">
                <div class="loader-spinner"></div>
                <p>Calculating your attendance...</p>
            </div>

            <div id="results-section" class="card results-section">
                <h2>Results</h2>
                <div id="results-table-container"></div>
            </div>

            <div class="explanation">
                <h2>How It Works</h2>
                <p>This calculator helps you determine how many classes you can miss ("bunk") while maintaining your desired attendance percentage.</p>
                <p><strong>Key Calculations:</strong></p>
                <ul>
                    <li>Total classes in semester = Classes per week Ã— Number of weeks</li>
                    <li>Classes held so far = (Your input)</li>
                    <li>Classes attended = (Your input)</li>
                    <li>Classes you can bunk = Total classes - (Classes needed to maintain desired %)</li>
                </ul>
            </div>
        </div>
    </div>
    <script src="script.js"></script>
</body>
</html>